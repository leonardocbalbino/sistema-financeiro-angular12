!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rxjs"),require("@angular/common"),require("@angular/core"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["rxjs","@angular/common","@angular/core","rxjs/operators"],t):(e=e||self)["angular-draggable-droppable"]=t(e.rxjs,e.ng.common,e.ng.core,e.rxjs.operators)}(this,(function(e,t,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var i,a=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(i,a){i.exports=function(e,t,n,r){function i(e,t){var n,r;return r=t,"function"==typeof(e=void 0===(n=e)?void 0===r?n:r:n)?function(){for(var t=arguments,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=t[o];return!!e.apply(this,r)}:e?function(){return!0}:function(){return!1}}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o||"undefined"!=typeof self&&self;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e){return null!=e&&"object"===(void 0===e?"undefined":a(e))&&1===e.nodeType&&"object"===a(e.style)&&"object"===a(e.ownerDocument)};function c(e,t){if(t=f(t,!0),!s(t))return-1;for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function l(e,t){return-1!==c(e,t)}function u(e,t){for(var n=0;n<t.length;n++)l(e,t[n])||e.push(t[n]);return t}function p(e){for(var t=arguments,n=[],r=arguments.length-1;r-- >0;)n[r]=t[r+1];return u(e,n=n.map(f))}function d(e){for(var t=arguments,n=[],r=arguments.length-1;r-- >0;)n[r]=t[r+1];return n.map(f).reduce((function(t,n){var r=c(e,n);return-1!==r?t.concat(e.splice(r,1)):t}),[])}function f(e,t){if("string"==typeof e)try{return document.querySelector(e)}catch(e){throw e}if(!s(e)&&!t)throw new TypeError(e+" is not a DOM element.");return e}function m(e){if(e===window)return function(){var e={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},e);var t={};return Object.defineProperties(t,e),t}();try{var t=e.getBoundingClientRect();return void 0===t.x&&(t.x=t.left,t.y=t.top),t}catch(t){throw new TypeError("Can't call getBoundingClientRect on "+e)}}var h,g=void 0;"function"!=typeof Object.create?(h=function(){},g=function(e,t){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");h.prototype=e||{};var n=new h;return h.prototype=null,void 0!==t&&Object.defineProperties(n,t),null===e&&(n.__proto__=null),n}):g=Object.create;var v=g,y=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function w(e,t){t=t||{};for(var n=v(e),r=0;r<y.length;r++)void 0!==t[y[r]]&&(n[y[r]]=t[y[r]]);return n}function b(e,t){console.log("data ",t),e.data=t||{},e.dispatched="mousemove"}var E,S=["webkit","moz","ms","o"],x=function(){if("undefined"==typeof window)return function(){};for(var e=0,t=S.length;e<t&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[S[e]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(e){var t=(new Date).getTime(),r=Math.max(0,16-t-n),o=window.setTimeout((function(){return e(t+r)}),r);return n=t+r,o}}return window.requestAnimationFrame.bind(window)}(),L=function(){if("undefined"==typeof window)return function(){};for(var e=0,t=S.length;e<t&&!window.cancelAnimationFrame;++e)window.cancelAnimationFrame=window[S[e]+"CancelAnimationFrame"]||window[S[e]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function C(e,t){void 0===t&&(t={});var n=this,r=4,o=!1;if("object"!=typeof t.margin){var a=t.margin||-1;this.margin={left:a,right:a,top:a,bottom:a}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var s={},c=function(e,t){var n=i((t=t||{}).allowUpdate,!0);return function(t){if(t=t||window.event,e.target=t.target||t.srcElement||t.originalTarget,e.element=this,e.type=t.type,n(t)){if(t.targetTouches)e.x=t.targetTouches[0].clientX,e.y=t.targetTouches[0].clientY,e.pageX=t.targetTouches[0].pageX,e.pageY=t.targetTouches[0].pageY,e.screenX=t.targetTouches[0].screenX,e.screenY=t.targetTouches[0].screenY;else{if(null===t.pageX&&null!==t.clientX){var r=t.target&&t.target.ownerDocument||document,o=r.documentElement,i=r.body;e.pageX=t.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)}else e.pageX=t.pageX,e.pageY=t.pageY;e.x=t.clientX,e.y=t.clientY,e.screenX=t.screenX,e.screenY=t.screenY}e.clientX=e.x,e.clientY=e.y}}}(s),u=function(e){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function n(e){for(var n=0;n<y.length;n++)t[y[n]]=e[y[n]]}return void 0!==e&&e.addEventListener("mousemove",n),{destroy:function(){e&&e.removeEventListener("mousemove",n,!1),t=null},dispatch:MouseEvent?function(e,n,r){var o=new MouseEvent("mousemove",w(t,n));return b(o,r),e.dispatchEvent(o)}:"function"==typeof document.createEvent?function(e,n,r){var o=w(t,n),i=document.createEvent("MouseEvents");return i.initMouseEvent("mousemove",!0,!0,window,0,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget),b(i,r),e.dispatchEvent(i)}:"function"==typeof document.createEventObject?function(e,n,r){var o=document.createEventObject(),i=w(t,n);for(var a in i)o[a]=i[a];return b(o,r),e.dispatchEvent(o)}:void 0}}(),f=!1;window.addEventListener("mousemove",c,!1),window.addEventListener("touchmove",c,!1),isNaN(t.maxSpeed)||(r=t.maxSpeed),"object"!=typeof r&&(r={left:r,right:r,top:r,bottom:r}),this.autoScroll=i(t.autoScroll),this.syncMove=i(t.syncMove,!1),this.destroy=function(t){window.removeEventListener("mousemove",c,!1),window.removeEventListener("touchmove",c,!1),window.removeEventListener("mousedown",O,!1),window.removeEventListener("touchstart",O,!1),window.removeEventListener("mouseup",X,!1),window.removeEventListener("touchend",X,!1),window.removeEventListener("pointerup",X,!1),window.removeEventListener("mouseleave",T,!1),window.removeEventListener("mousemove",P,!1),window.removeEventListener("touchmove",P,!1),window.removeEventListener("scroll",C,!0),e=[],t&&Y()},this.add=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return p.apply(void 0,[e].concat(t)),this},this.remove=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return d.apply(void 0,[e].concat(t))};var h,g,v=null;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),g=e,e=[],g.forEach((function(e){e===window?v=window:n.add(e)})),Object.defineProperties(this,{down:{get:function(){return f}},maxSpeed:{get:function(){return r}},point:{get:function(){return s}},scrolling:{get:function(){return o}}});var E,S=null;function C(t){for(var n=0;n<e.length;n++)if(e[n]===t.target){o=!0;break}o&&x((function(){return o=!1}))}function O(){f=!0}function X(){f=!1,Y()}function Y(){L(E),L(h)}function T(){f=!1}function j(){for(var t=null,n=0;n<e.length;n++)D(s,e[n])&&(t=e[n]);return t}function P(t){if(n.autoScroll()&&!t.dispatched){var r=t.target,o=document.body;S&&!D(s,S)&&(n.scrollWhenOutside||(S=null)),r&&r.parentNode===o?r=j():(r=function(t){if(!t)return null;if(S===t)return t;if(l(e,t))return t;for(;t=t.parentNode;)if(l(e,t))return t;return null}(r))||(r=j()),r&&r!==S&&(S=r),v&&(L(h),h=x(M)),S&&(L(E),E=x(A))}}function M(){R(v),L(h),h=x(M)}function A(){S&&(R(S),L(E),E=x(A))}function R(e){var t,r,o=m(e);t=s.x<o.left+n.margin.left?Math.floor(Math.max(-1,(s.x-o.left)/n.margin.left-1)*n.maxSpeed.left):s.x>o.right-n.margin.right?Math.ceil(Math.min(1,(s.x-o.right)/n.margin.right+1)*n.maxSpeed.right):0,r=s.y<o.top+n.margin.top?Math.floor(Math.max(-1,(s.y-o.top)/n.margin.top-1)*n.maxSpeed.top):s.y>o.bottom-n.margin.bottom?Math.ceil(Math.min(1,(s.y-o.bottom)/n.margin.bottom+1)*n.maxSpeed.bottom):0,n.syncMove()&&u.dispatch(e,{pageX:s.pageX+t,pageY:s.pageY+r,clientX:s.x+t,clientY:s.y+r}),setTimeout((function(){r&&function(e,t){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+t):e.scrollTop+=t}(e,r),t&&function(e,t){e===window?window.scrollTo(e.pageXOffset+t,e.pageYOffset):e.scrollLeft+=t}(e,t)}))}window.addEventListener("mousedown",O,!1),window.addEventListener("touchstart",O,!1),window.addEventListener("mouseup",X,!1),window.addEventListener("touchend",X,!1),window.addEventListener("pointerup",X,!1),window.addEventListener("mousemove",P,!1),window.addEventListener("touchmove",P,!1),window.addEventListener("mouseleave",T,!1),window.addEventListener("scroll",C,!0)}function O(e,t){return new C(e,t)}function D(e,t,n){return n?e.y>n.top&&e.y<n.bottom&&e.x>n.left&&e.x<n.right:function(e,t){var n=m(t);return e.y>n.top&&e.y<n.bottom&&e.x>n.left&&e.x<n.right}(e,t)}return(E=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(o,i){!function(e,t,n,r,o,i){r=r&&r.hasOwnProperty("default")?r.default:r;
/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation. All rights reserved.
		    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
		    this file except in compliance with the License. You may obtain a copy of the
		    License at http://www.apache.org/licenses/LICENSE-2.0

		    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
		    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
		    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
		    MERCHANTABLITY OR NON-INFRINGEMENT.

		    See the Apache Version 2.0 License for specific language governing permissions
		    and limitations under the License.
		    ***************************************************************************** */
var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var c=function(){function e(){this.currentDrag=new t.Subject}return e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=o.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),l=function(){function e(e){this.elementRef=e,this.activeLongPressDrag=!1,this.longPressConfig={duration:300,delta:30}}return e.decorators=[{type:o.Directive,args:[{selector:"[mwlDraggableScrollContainer]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef}]},e.propDecorators={activeLongPressDrag:[{type:o.Input}],longPressConfig:[{type:o.Input}]},e}();function u(e,t,n){n&&n.split(" ").forEach((function(n){return e.addClass(t.nativeElement,n)}))}function p(e,t,n){n&&n.split(" ").forEach((function(n){return e.removeClass(t.nativeElement,n)}))}var d=function(){function e(e,n,r,i,a,s,c){this.element=e,this.renderer=n,this.draggableHelper=r,this.zone=i,this.vcr=a,this.scrollContainer=s,this.document=c,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new o.EventEmitter,this.dragStart=new o.EventEmitter,this.ghostElementCreated=new o.EventEmitter,this.dragging=new o.EventEmitter,this.dragEnd=new o.EventEmitter,this.pointerDown$=new t.Subject,this.pointerMove$=new t.Subject,this.pointerUp$=new t.Subject,this.eventListenerSubscriptions={},this.destroy$=new t.Subject,this.timeLongPress={timerBegin:0,timerEnd:0}}return e.prototype.ngOnInit=function(){var e=this;this.checkEventListeners();var n=this.pointerDown$.pipe(i.filter((function(){return e.canDrag()})),i.mergeMap((function(n){n.event.stopPropagation&&!e.scrollContainer&&n.event.stopPropagation();var o=e.renderer.createElement("style");e.renderer.setAttribute(o,"type","text/css"),e.renderer.appendChild(o,e.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame((function(){e.document.head.appendChild(o)}));var c=e.getScrollPosition(),l=new t.Observable((function(t){var n=e.scrollContainer?e.scrollContainer.elementRef.nativeElement:"window";return e.renderer.listen(n,"scroll",(function(e){return t.next(e)}))})).pipe(i.startWith(c),i.map((function(){return e.getScrollPosition()}))),d=new t.Subject,f=new t.ReplaySubject;e.zone.run((function(){e.dragPointerDown.next({x:0,y:0})}));var m=t.merge(e.pointerUp$,e.pointerDown$,f,e.destroy$).pipe(i.share()),h=t.combineLatest([e.pointerMove$,l]).pipe(i.map((function(e){var t=s(e,2),r=t[0],o=t[1];return{currentDrag$:d,transformX:r.clientX-n.clientX,transformY:r.clientY-n.clientY,clientX:r.clientX,clientY:r.clientY,scrollLeft:o.left,scrollTop:o.top,target:r.event.target}})),i.map((function(t){return e.dragSnapGrid.x&&(t.transformX=Math.round(t.transformX/e.dragSnapGrid.x)*e.dragSnapGrid.x),e.dragSnapGrid.y&&(t.transformY=Math.round(t.transformY/e.dragSnapGrid.y)*e.dragSnapGrid.y),t})),i.map((function(t){return e.dragAxis.x||(t.transformX=0),e.dragAxis.y||(t.transformY=0),t})),i.map((function(e){var t=e.scrollLeft-c.left,n=e.scrollTop-c.top;return a({},e,{x:e.transformX+t,y:e.transformY+n})})),i.filter((function(t){var n=t.x,r=t.y,o=t.transformX,i=t.transformY;return!e.validateDrag||e.validateDrag({x:n,y:r,transform:{x:o,y:i}})})),i.takeUntil(m),i.share()),g=h.pipe(i.take(1),i.share()),v=h.pipe(i.takeLast(1),i.share());return g.subscribe((function(t){var n=t.clientX,o=t.clientY,i=t.x,s=t.y;if(e.zone.run((function(){e.dragStart.next({cancelDrag$:f})})),e.scroller=r([e.scrollContainer?e.scrollContainer.elementRef.nativeElement:e.document.defaultView],a({},e.autoScroll,{autoScroll:function(){return!0}})),u(e.renderer,e.element,e.dragActiveClass),e.ghostDragEnabled){var c=e.element.nativeElement.getBoundingClientRect(),l=e.element.nativeElement.cloneNode(!0);if(e.showOriginalElementWhileDragging||e.renderer.setStyle(e.element.nativeElement,"visibility","hidden"),e.ghostElementAppendTo?e.ghostElementAppendTo.appendChild(l):e.element.nativeElement.parentNode.insertBefore(l,e.element.nativeElement.nextSibling),e.ghostElement=l,e.document.body.style.cursor=e.dragCursor,e.setElementStyles(l,{position:"fixed",top:c.top+"px",left:c.left+"px",width:c.width+"px",height:c.height+"px",cursor:e.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),e.ghostElementTemplate){var p=e.vcr.createEmbeddedView(e.ghostElementTemplate);l.innerHTML="",p.rootNodes.filter((function(e){return e instanceof Node})).forEach((function(e){l.appendChild(e)})),v.subscribe((function(){e.vcr.remove(e.vcr.indexOf(p))}))}e.zone.run((function(){e.ghostElementCreated.emit({clientX:n-i,clientY:o-s,element:l})})),v.subscribe((function(){l.parentElement.removeChild(l),e.ghostElement=null,e.renderer.setStyle(e.element.nativeElement,"visibility","")}))}e.draggableHelper.currentDrag.next(d)})),v.pipe(i.mergeMap((function(e){var t=f.pipe(i.count(),i.take(1),i.map((function(t){return a({},e,{dragCancelled:t>0})})));return f.complete(),t}))).subscribe((function(t){var n=t.x,r=t.y,o=t.dragCancelled;e.scroller.destroy(),e.zone.run((function(){e.dragEnd.next({x:n,y:r,dragCancelled:o})})),p(e.renderer,e.element,e.dragActiveClass),d.complete()})),t.merge(m,v).pipe(i.take(1)).subscribe((function(){requestAnimationFrame((function(){e.document.head.removeChild(o)}))})),h})),i.share());t.merge(n.pipe(i.take(1),i.map((function(e){return[,e]}))),n.pipe(i.pairwise())).pipe(i.filter((function(e){var t=s(e,2),n=t[0],r=t[1];return!n||n.x!==r.x||n.y!==r.y})),i.map((function(e){var t=s(e,2);return t[0],t[1]}))).subscribe((function(t){var n=t.x,r=t.y,o=t.currentDrag$,i=t.clientX,a=t.clientY,s=t.transformX,c=t.transformY,l=t.target;e.zone.run((function(){e.dragging.next({x:n,y:r})})),requestAnimationFrame((function(){if(e.ghostElement){var t="translate3d("+s+"px, "+c+"px, 0px)";e.setElementStyles(e.ghostElement,{transform:t,"-webkit-transform":t,"-ms-transform":t,"-moz-transform":t,"-o-transform":t})}})),o.next({clientX:i,clientY:a,dropData:e.dropData,target:l})}))},e.prototype.ngOnChanges=function(e){e.dragAxis&&this.checkEventListeners()},e.prototype.ngOnDestroy=function(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()},e.prototype.checkEventListeners=function(){var e=this,t=this.canDrag(),n=Object.keys(this.eventListenerSubscriptions).length>0;t&&!n?this.zone.runOutsideAngular((function(){e.eventListenerSubscriptions.mousedown=e.renderer.listen(e.element.nativeElement,"mousedown",(function(t){e.onMouseDown(t)})),e.eventListenerSubscriptions.mouseup=e.renderer.listen("document","mouseup",(function(t){e.onMouseUp(t)})),e.eventListenerSubscriptions.touchstart=e.renderer.listen(e.element.nativeElement,"touchstart",(function(t){e.onTouchStart(t)})),e.eventListenerSubscriptions.touchend=e.renderer.listen("document","touchend",(function(t){e.onTouchEnd(t)})),e.eventListenerSubscriptions.touchcancel=e.renderer.listen("document","touchcancel",(function(t){e.onTouchEnd(t)})),e.eventListenerSubscriptions.mouseenter=e.renderer.listen(e.element.nativeElement,"mouseenter",(function(){e.onMouseEnter()})),e.eventListenerSubscriptions.mouseleave=e.renderer.listen(e.element.nativeElement,"mouseleave",(function(){e.onMouseLeave()}))})):!t&&n&&this.unsubscribeEventListeners()},e.prototype.onMouseDown=function(e){var t=this;0===e.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",(function(e){t.pointerMove$.next({event:e,clientX:e.clientX,clientY:e.clientY})}))),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))},e.prototype.onMouseUp=function(e){0===e.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))},e.prototype.onTouchStart=function(e){var n,r,o,i=this;if((this.scrollContainer&&this.scrollContainer.activeLongPressDrag||this.touchStartLongPress)&&(this.timeLongPress.timerBegin=Date.now(),r=!1,o=this.hasScrollbar(),n=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){var a=t.fromEvent(this.document,"contextmenu").subscribe((function(e){e.preventDefault()})),s=t.fromEvent(this.document,"touchmove",{passive:!1}).subscribe((function(t){(i.scrollContainer&&i.scrollContainer.activeLongPressDrag||i.touchStartLongPress)&&!r&&o&&(r=i.shouldBeginDrag(e,t,n)),(i.scrollContainer&&i.scrollContainer.activeLongPressDrag||i.touchStartLongPress)&&o&&!r||(t.preventDefault(),i.pointerMove$.next({event:t,clientX:t.targetTouches[0].clientX,clientY:t.targetTouches[0].clientY}))}));this.eventListenerSubscriptions.touchmove=function(){a.unsubscribe(),s.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})},e.prototype.onTouchEnd=function(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,(this.scrollContainer&&this.scrollContainer.activeLongPressDrag||this.touchStartLongPress)&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})},e.prototype.onMouseEnter=function(){this.setCursor(this.dragCursor)},e.prototype.onMouseLeave=function(){this.setCursor("")},e.prototype.canDrag=function(){return this.dragAxis.x||this.dragAxis.y},e.prototype.setCursor=function(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)},e.prototype.unsubscribeEventListeners=function(){var e=this;Object.keys(this.eventListenerSubscriptions).forEach((function(t){e.eventListenerSubscriptions[t](),delete e.eventListenerSubscriptions[t]}))},e.prototype.setElementStyles=function(e,t){var n=this;Object.keys(t).forEach((function(r){n.renderer.setStyle(e,r,t[r])}))},e.prototype.getScrollElement=function(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body},e.prototype.getScrollPosition=function(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}},e.prototype.shouldBeginDrag=function(e,t,n){var r=this.getScrollPosition(),o=Math.abs(r.top-n.top),i=Math.abs(r.left-n.left),a=Math.abs(t.targetTouches[0].clientX-e.touches[0].clientX)-i+(Math.abs(t.targetTouches[0].clientY-e.touches[0].clientY)-o),s=this.touchStartLongPress?this.touchStartLongPress:{delta:this.scrollContainer.longPressConfig.delta,delay:this.scrollContainer.longPressConfig.duration};return(a>s.delta||o>0||i>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=s.delay&&(this.disableScroll(),!0)},e.prototype.enableScroll=function(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")},e.prototype.disableScroll=function(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")},e.prototype.hasScrollbar=function(){var e=this.getScrollElement(),t=e.scrollWidth>e.clientWidth,n=e.scrollHeight>e.clientHeight;return t||n},e.decorators=[{type:o.Directive,args:[{selector:"[mwlDraggable]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:o.Renderer2},{type:c},{type:o.NgZone},{type:o.ViewContainerRef},{type:l,decorators:[{type:o.Optional}]},{type:void 0,decorators:[{type:o.Inject,args:[n.DOCUMENT]}]}]},e.propDecorators={dropData:[{type:o.Input}],dragAxis:[{type:o.Input}],dragSnapGrid:[{type:o.Input}],ghostDragEnabled:[{type:o.Input}],showOriginalElementWhileDragging:[{type:o.Input}],validateDrag:[{type:o.Input}],dragCursor:[{type:o.Input}],dragActiveClass:[{type:o.Input}],ghostElementAppendTo:[{type:o.Input}],ghostElementTemplate:[{type:o.Input}],touchStartLongPress:[{type:o.Input}],autoScroll:[{type:o.Input}],dragPointerDown:[{type:o.Output}],dragStart:[{type:o.Output}],ghostElementCreated:[{type:o.Output}],dragging:[{type:o.Output}],dragEnd:[{type:o.Output}]},e}();function f(e,t,n){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}var m=function(){function e(e,t,n,r,i){this.element=e,this.draggableHelper=t,this.zone=n,this.renderer=r,this.scrollContainer=i,this.dragEnter=new o.EventEmitter,this.dragLeave=new o.EventEmitter,this.dragOver=new o.EventEmitter,this.drop=new o.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe((function(t){u(e.renderer,e.element,e.dragActiveClass);var n,r,o={updateCache:!0},a=e.renderer.listen(e.scrollContainer?e.scrollContainer.elementRef.nativeElement:"window","scroll",(function(){o.updateCache=!0})),c=t.pipe(i.map((function(t){var r=t.clientX,i=t.clientY,a=t.dropData,s=t.target;n=a,o.updateCache&&(o.rect=e.element.nativeElement.getBoundingClientRect(),e.scrollContainer&&(o.scrollContainerRect=e.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),o.updateCache=!1);var c=f(r,i,o.rect),l=!e.validateDrop||e.validateDrop({clientX:r,clientY:i,target:s});return o.scrollContainerRect?c&&l&&f(r,i,o.scrollContainerRect):c&&l}))),l=c.pipe(i.distinctUntilChanged());l.pipe(i.filter((function(e){return e}))).subscribe((function(){r=!0,u(e.renderer,e.element,e.dragOverClass),e.zone.run((function(){e.dragEnter.next({dropData:n})}))})),c.pipe(i.filter((function(e){return e}))).subscribe((function(){e.zone.run((function(){e.dragOver.next({dropData:n})}))})),l.pipe(i.pairwise(),i.filter((function(e){var t=s(e,2),n=t[0],r=t[1];return n&&!r}))).subscribe((function(){r=!1,p(e.renderer,e.element,e.dragOverClass),e.zone.run((function(){e.dragLeave.next({dropData:n})}))})),t.subscribe({complete:function(){a(),p(e.renderer,e.element,e.dragActiveClass),r&&(p(e.renderer,e.element,e.dragOverClass),e.zone.run((function(){e.drop.next({dropData:n})})))}})}))},e.prototype.ngOnDestroy=function(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()},e.decorators=[{type:o.Directive,args:[{selector:"[mwlDroppable]"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:c},{type:o.NgZone},{type:o.Renderer2},{type:l,decorators:[{type:o.Optional}]}]},e.propDecorators={dragOverClass:[{type:o.Input}],dragActiveClass:[{type:o.Input}],validateDrop:[{type:o.Input}],dragEnter:[{type:o.Output}],dragLeave:[{type:o.Output}],dragOver:[{type:o.Output}],drop:[{type:o.Output}]},e}(),h=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{declarations:[d,m,l],exports:[d,m,l]}]}],e}();e.DragAndDropModule=h,e.ɵc=c,e.ɵd=l,e.ɵb=d,e.ɵa=m,Object.defineProperty(e,"__esModule",{value:!0})}(i,e,t,O,n,r)})))&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}(e,t,n,r)}));return(i=a)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}));
//# sourceMappingURL=angular-draggable-droppable.umd.min.js.map
