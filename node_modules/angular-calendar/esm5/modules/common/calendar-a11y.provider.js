import { __decorate, __metadata } from "tslib";
import { Injectable } from '@angular/core';
import { formatDate, I18nPluralPipe } from '@angular/common';
/**
 * This class is responsible for adding accessibility to the calendar.
 * You may override any of its methods via angulars DI to suit your requirements.
 * For example:
 *
 * ```typescript
 * import { A11yParams, CalendarA11y } from 'angular-calendar';
 * import { formatDate, I18nPluralPipe } from '@angular/common';
 * import { Injectable } from '@angular/core';
 *
 * // adding your own a11y params
 * export interface CustomA11yParams extends A11yParams {
 *   isDrSuess?: boolean;
 * }
 *
 * @Injectable()
 * export class CustomCalendarA11y extends CalendarA11y {
 *   constructor(protected i18nPlural: I18nPluralPipe) {
 *     super(i18nPlural);
 *   }
 *
 *   // overriding a function
 *   public openDayEventsLandmark({ date, locale, isDrSuess }: CustomA11yParams): string {
 *     if (isDrSuess) {
 *       return `
 *         ${formatDate(date, 'EEEE MMMM d', locale)}
 *          Today you are you! That is truer than true! There is no one alive
 *          who is you-er than you!
 *       `;
 *     }
 *   }
 * }
 *
 * // in your component that uses the calendar
 * providers: [{
 *  provide: CalendarA11y,
 *  useClass: CustomCalendarA11y
 * }]
 * ```
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
var CalendarA11y = /** @class */ (function () {
    function CalendarA11y(i18nPlural) {
        this.i18nPlural = i18nPlural;
    }
    /**
     * Aria label for the badges/date of a cell
     * @example: `Saturday October 19 1 event click to expand`
     */
    CalendarA11y.prototype.monthCell = function (_a) {
        var day = _a.day, locale = _a.locale;
        if (day.badgeTotal > 0) {
            return "\n        " + formatDate(day.date, 'EEEE MMMM d', locale) + ",\n        " + this.i18nPlural.transform(day.badgeTotal, {
                '=0': 'No events',
                '=1': 'One event',
                other: '# events',
            }) + ",\n         click to expand\n      ";
        }
        else {
            return "" + formatDate(day.date, 'EEEE MMMM d', locale);
        }
    };
    /**
     * Aria label for the open day events start landmark
     * @example: `Saturday October 19 expanded view`
     */
    CalendarA11y.prototype.openDayEventsLandmark = function (_a) {
        var date = _a.date, locale = _a.locale;
        return "\n      Beginning of expanded view for " + formatDate(date, 'EEEE MMMM dd', locale) + "\n    ";
    };
    /**
     * Aria label for alert that a day in the month view was expanded
     * @example: `Saturday October 19 expanded`
     */
    CalendarA11y.prototype.openDayEventsAlert = function (_a) {
        var date = _a.date, locale = _a.locale;
        return formatDate(date, 'EEEE MMMM dd', locale) + " expanded";
    };
    /**
     * Descriptive aria label for an event
     * @example: `Saturday October 19th, Scott's Pizza Party, from 11:00am to 5:00pm`
     */
    CalendarA11y.prototype.eventDescription = function (_a) {
        var event = _a.event, locale = _a.locale;
        if (event.allDay === true) {
            return this.allDayEventDescription({ event: event, locale: locale });
        }
        var aria = "\n      " + formatDate(event.start, 'EEEE MMMM dd', locale) + ",\n      " + event.title + ", from " + formatDate(event.start, 'hh:mm a', locale) + "\n    ";
        if (event.end) {
            return aria + (" to " + formatDate(event.end, 'hh:mm a', locale));
        }
        return aria;
    };
    /**
     * Descriptive aria label for an all day event
     * @example:
     * `Scott's Party, event spans multiple days: start time October 19 5:00pm, no stop time`
     */
    CalendarA11y.prototype.allDayEventDescription = function (_a) {
        var event = _a.event, locale = _a.locale;
        var aria = "\n      " + event.title + ", event spans multiple days:\n      start time " + formatDate(event.start, 'MMMM dd hh:mm a', locale) + "\n    ";
        if (event.end) {
            return (aria + (", stop time " + formatDate(event.end, 'MMMM d hh:mm a', locale)));
        }
        return aria + ", no stop time";
    };
    /**
     * Aria label for the calendar event actions icons
     * @returns 'Edit' for fa-pencil icons, and 'Delete' for fa-times icons
     */
    CalendarA11y.prototype.actionButtonLabel = function (_a) {
        var action = _a.action;
        return action.a11yLabel;
    };
    /**
     * @returns {number} Tab index to be given to month cells
     */
    CalendarA11y.prototype.monthCellTabIndex = function () {
        return 0;
    };
    /**
     * @returns true if the events inside the month cell should be aria-hidden
     */
    CalendarA11y.prototype.hideMonthCellEvents = function () {
        return true;
    };
    /**
     * @returns true if event titles should be aria-hidden (global)
     */
    CalendarA11y.prototype.hideEventTitle = function () {
        return true;
    };
    /**
     * @returns true if hour segments in the week view should be aria-hidden
     */
    CalendarA11y.prototype.hideWeekHourSegment = function () {
        return true;
    };
    /**
     * @returns true if hour segments in the day view should be aria-hidden
     */
    CalendarA11y.prototype.hideDayHourSegment = function () {
        return true;
    };
    CalendarA11y.ctorParameters = function () { return [
        { type: I18nPluralPipe }
    ]; };
    CalendarA11y = __decorate([ __metadata("design:paramtypes", [I18nPluralPipe])
    ], CalendarA11y);
CalendarA11y.ɵfac = function CalendarA11y_Factory(t) { return new (t || CalendarA11y)(ɵngcc0.ɵɵinject(ɵngcc1.I18nPluralPipe)); };
CalendarA11y.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: CalendarA11y, factory: function (t) { return CalendarA11y.ɵfac(t); } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CalendarA11y, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.I18nPluralPipe }]; }, null); })();
    return CalendarA11y;
}());
export { CalendarA11y };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItYTExeS5wcm92aWRlci5qcyIsInNvdXJjZXMiOlsiYW5ndWxhci1jYWxlbmRhci9tb2R1bGVzL2NvbW1vbi9jYWxlbmRhci1hMTF5LnByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFHN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7O0FBRUg7QUFDb0IsSUFBbEIsc0JBQXNCLFVBQTBCO0FBQUksUUFBOUIsZUFBVSxHQUFWLFVBQVUsQ0FBZ0I7QUFBQyxJQUFFLENBQUM7QUFDdEQsSUFDRTtBQUNGO0FBQ0U7QUFDRSxPQUFDO0FBQ0wsSUFBUyxnQ0FBUyxHQUFoQixVQUFpQixFQUEyQjtBQUFJLFlBQTdCLFlBQUcsRUFBRSxrQkFBTTtBQUFFLFFBQzlCLElBQUksR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUU7QUFDNUIsWUFBTSxPQUFPLGVBQ0gsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLE1BQU0sQ0FBQyxtQkFDM0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRTtBQUNwRCxnQkFBVSxJQUFJLEVBQUUsV0FBVztBQUMzQixnQkFBVSxJQUFJLEVBQUUsV0FBVztBQUMzQixnQkFBVSxLQUFLLEVBQUUsVUFBVTtBQUMzQixhQUFTLENBQUMsd0NBRUgsQ0FBQztBQUNS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QUc7QUFDTCxJQUFTLHFDQUFjLEdBQXJCO0FBQWMsUUFDWixPQUFPLElBQUksQ0FBQztBQUNoQixJQUFFLENBQUM7QUFFSCxJQUFFO0FBQ0Y7QUFDRSxPQUFHO0FBQ0wsSUFBUywwQ0FBbUIsR0FBMUI7QUFBYyxRQUNaLE9BQU8sSUFBSSxDQUFDO0FBQ2hCLElBQUUsQ0FBQztBQUVILElBQUU7QUFDRjtBQUNFLE9BQUc7QUFDTCxJQUFTLHlDQUFrQixHQUF6QjtBQUFjLFFBQ1osT0FBTyxJQUFJLENBQUM7QUFDaEIsSUFBRSxDQUFDO0FBQ0Y7QUFDdUQsZ0JBeEhwQixjQUFjO0FBQUc7QUFHcEQsSUFKWSxZQUFZLHdCQUR4QixVQUFVLEVBQUUsckJBQ0wsa0NBQzRCLGNBQWM7QUFBRyxPQUR4QyxZQUFZLENBd0h4Qjs7Ozs7K0VBQ0Q7QUFBQyxJQURELG1CQUFDO0FBQ0EsQ0FEQSxBQXhIRCxJQXdIQztBQUNELFNBekhhLFlBQVk7QUFDeEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBmb3JtYXREYXRlLCBJMThuUGx1cmFsUGlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBBMTF5UGFyYW1zIH0gZnJvbSAnLi9jYWxlbmRhci1hMTF5LmludGVyZmFjZSc7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgYWRkaW5nIGFjY2Vzc2liaWxpdHkgdG8gdGhlIGNhbGVuZGFyLlxuICogWW91IG1heSBvdmVycmlkZSBhbnkgb2YgaXRzIG1ldGhvZHMgdmlhIGFuZ3VsYXJzIERJIHRvIHN1aXQgeW91ciByZXF1aXJlbWVudHMuXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBBMTF5UGFyYW1zLCBDYWxlbmRhckExMXkgfSBmcm9tICdhbmd1bGFyLWNhbGVuZGFyJztcbiAqIGltcG9ydCB7IGZvcm1hdERhdGUsIEkxOG5QbHVyYWxQaXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbiAqIGltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqXG4gKiAvLyBhZGRpbmcgeW91ciBvd24gYTExeSBwYXJhbXNcbiAqIGV4cG9ydCBpbnRlcmZhY2UgQ3VzdG9tQTExeVBhcmFtcyBleHRlbmRzIEExMXlQYXJhbXMge1xuICogICBpc0RyU3Vlc3M/OiBib29sZWFuO1xuICogfVxuICpcbiAqIEBJbmplY3RhYmxlKClcbiAqIGV4cG9ydCBjbGFzcyBDdXN0b21DYWxlbmRhckExMXkgZXh0ZW5kcyBDYWxlbmRhckExMXkge1xuICogICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgaTE4blBsdXJhbDogSTE4blBsdXJhbFBpcGUpIHtcbiAqICAgICBzdXBlcihpMThuUGx1cmFsKTtcbiAqICAgfVxuICpcbiAqICAgLy8gb3ZlcnJpZGluZyBhIGZ1bmN0aW9uXG4gKiAgIHB1YmxpYyBvcGVuRGF5RXZlbnRzTGFuZG1hcmsoeyBkYXRlLCBsb2NhbGUsIGlzRHJTdWVzcyB9OiBDdXN0b21BMTF5UGFyYW1zKTogc3RyaW5nIHtcbiAqICAgICBpZiAoaXNEclN1ZXNzKSB7XG4gKiAgICAgICByZXR1cm4gYFxuICogICAgICAgICAke2Zvcm1hdERhdGUoZGF0ZSwgJ0VFRUUgTU1NTSBkJywgbG9jYWxlKX1cbiAqICAgICAgICAgIFRvZGF5IHlvdSBhcmUgeW91ISBUaGF0IGlzIHRydWVyIHRoYW4gdHJ1ZSEgVGhlcmUgaXMgbm8gb25lIGFsaXZlXG4gKiAgICAgICAgICB3aG8gaXMgeW91LWVyIHRoYW4geW91IVxuICogICAgICAgYDtcbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiAvLyBpbiB5b3VyIGNvbXBvbmVudCB0aGF0IHVzZXMgdGhlIGNhbGVuZGFyXG4gKiBwcm92aWRlcnM6IFt7XG4gKiAgcHJvdmlkZTogQ2FsZW5kYXJBMTF5LFxuICogIHVzZUNsYXNzOiBDdXN0b21DYWxlbmRhckExMXlcbiAqIH1dXG4gKiBgYGBcbiAqL1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQTExeSB7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBpMThuUGx1cmFsOiBJMThuUGx1cmFsUGlwZSkge31cblxuICAvKipcbiAgICogQXJpYSBsYWJlbCBmb3IgdGhlIGJhZGdlcy9kYXRlIG9mIGEgY2VsbFxuICAgKiBAZXhhbXBsZTogYFNhdHVyZGF5IE9jdG9iZXIgMTkgMSBldmVudCBjbGljayB0byBleHBhbmRgXG4gICAqL1xuICBwdWJsaWMgbW9udGhDZWxsKHsgZGF5LCBsb2NhbGUgfTogQTExeVBhcmFtcyk6IHN0cmluZyB7XG4gICAgaWYgKGRheS5iYWRnZVRvdGFsID4gMCkge1xuICAgICAgcmV0dXJuIGBcbiAgICAgICAgJHtmb3JtYXREYXRlKGRheS5kYXRlLCAnRUVFRSBNTU1NIGQnLCBsb2NhbGUpfSxcbiAgICAgICAgJHt0aGlzLmkxOG5QbHVyYWwudHJhbnNmb3JtKGRheS5iYWRnZVRvdGFsLCB7XG4gICAgICAgICAgJz0wJzogJ05vIGV2ZW50cycsXG4gICAgICAgICAgJz0xJzogJ09uZSBldmVudCcsXG4gICAgICAgICAgb3RoZXI6ICcjIGV2ZW50cycsXG4gICAgICAgIH0pfSxcbiAgICAgICAgIGNsaWNrIHRvIGV4cGFuZFxuICAgICAgYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGAke2Zvcm1hdERhdGUoZGF5LmRhdGUsICdFRUVFIE1NTU0gZCcsIGxvY2FsZSl9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXJpYSBsYWJlbCBmb3IgdGhlIG9wZW4gZGF5IGV2ZW50cyBzdGFydCBsYW5kbWFya1xuICAgKiBAZXhhbXBsZTogYFNhdHVyZGF5IE9jdG9iZXIgMTkgZXhwYW5kZWQgdmlld2BcbiAgICovXG4gIHB1YmxpYyBvcGVuRGF5RXZlbnRzTGFuZG1hcmsoeyBkYXRlLCBsb2NhbGUgfTogQTExeVBhcmFtcyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAgIEJlZ2lubmluZyBvZiBleHBhbmRlZCB2aWV3IGZvciAke2Zvcm1hdERhdGUoZGF0ZSwgJ0VFRUUgTU1NTSBkZCcsIGxvY2FsZSl9XG4gICAgYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcmlhIGxhYmVsIGZvciBhbGVydCB0aGF0IGEgZGF5IGluIHRoZSBtb250aCB2aWV3IHdhcyBleHBhbmRlZFxuICAgKiBAZXhhbXBsZTogYFNhdHVyZGF5IE9jdG9iZXIgMTkgZXhwYW5kZWRgXG4gICAqL1xuICBwdWJsaWMgb3BlbkRheUV2ZW50c0FsZXJ0KHsgZGF0ZSwgbG9jYWxlIH06IEExMXlQYXJhbXMpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtmb3JtYXREYXRlKGRhdGUsICdFRUVFIE1NTU0gZGQnLCBsb2NhbGUpfSBleHBhbmRlZGA7XG4gIH1cblxuICAvKipcbiAgICogRGVzY3JpcHRpdmUgYXJpYSBsYWJlbCBmb3IgYW4gZXZlbnRcbiAgICogQGV4YW1wbGU6IGBTYXR1cmRheSBPY3RvYmVyIDE5dGgsIFNjb3R0J3MgUGl6emEgUGFydHksIGZyb20gMTE6MDBhbSB0byA1OjAwcG1gXG4gICAqL1xuICBwdWJsaWMgZXZlbnREZXNjcmlwdGlvbih7IGV2ZW50LCBsb2NhbGUgfTogQTExeVBhcmFtcyk6IHN0cmluZyB7XG4gICAgaWYgKGV2ZW50LmFsbERheSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuYWxsRGF5RXZlbnREZXNjcmlwdGlvbih7IGV2ZW50LCBsb2NhbGUgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYXJpYSA9IGBcbiAgICAgICR7Zm9ybWF0RGF0ZShldmVudC5zdGFydCwgJ0VFRUUgTU1NTSBkZCcsIGxvY2FsZSl9LFxuICAgICAgJHtldmVudC50aXRsZX0sIGZyb20gJHtmb3JtYXREYXRlKGV2ZW50LnN0YXJ0LCAnaGg6bW0gYScsIGxvY2FsZSl9XG4gICAgYDtcbiAgICBpZiAoZXZlbnQuZW5kKSB7XG4gICAgICByZXR1cm4gYXJpYSArIGAgdG8gJHtmb3JtYXREYXRlKGV2ZW50LmVuZCwgJ2hoOm1tIGEnLCBsb2NhbGUpfWA7XG4gICAgfVxuICAgIHJldHVybiBhcmlhO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc2NyaXB0aXZlIGFyaWEgbGFiZWwgZm9yIGFuIGFsbCBkYXkgZXZlbnRcbiAgICogQGV4YW1wbGU6XG4gICAqIGBTY290dCdzIFBhcnR5LCBldmVudCBzcGFucyBtdWx0aXBsZSBkYXlzOiBzdGFydCB0aW1lIE9jdG9iZXIgMTkgNTowMHBtLCBubyBzdG9wIHRpbWVgXG4gICAqL1xuICBwdWJsaWMgYWxsRGF5RXZlbnREZXNjcmlwdGlvbih7IGV2ZW50LCBsb2NhbGUgfTogQTExeVBhcmFtcyk6IHN0cmluZyB7XG4gICAgY29uc3QgYXJpYSA9IGBcbiAgICAgICR7ZXZlbnQudGl0bGV9LCBldmVudCBzcGFucyBtdWx0aXBsZSBkYXlzOlxuICAgICAgc3RhcnQgdGltZSAke2Zvcm1hdERhdGUoZXZlbnQuc3RhcnQsICdNTU1NIGRkIGhoOm1tIGEnLCBsb2NhbGUpfVxuICAgIGA7XG4gICAgaWYgKGV2ZW50LmVuZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgYXJpYSArIGAsIHN0b3AgdGltZSAke2Zvcm1hdERhdGUoZXZlbnQuZW5kLCAnTU1NTSBkIGhoOm1tIGEnLCBsb2NhbGUpfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBhcmlhICsgYCwgbm8gc3RvcCB0aW1lYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcmlhIGxhYmVsIGZvciB0aGUgY2FsZW5kYXIgZXZlbnQgYWN0aW9ucyBpY29uc1xuICAgKiBAcmV0dXJucyAnRWRpdCcgZm9yIGZhLXBlbmNpbCBpY29ucywgYW5kICdEZWxldGUnIGZvciBmYS10aW1lcyBpY29uc1xuICAgKi9cbiAgcHVibGljIGFjdGlvbkJ1dHRvbkxhYmVsKHsgYWN0aW9uIH06IEExMXlQYXJhbXMpOiBzdHJpbmcge1xuICAgIHJldHVybiBhY3Rpb24uYTExeUxhYmVsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFRhYiBpbmRleCB0byBiZSBnaXZlbiB0byBtb250aCBjZWxsc1xuICAgKi9cbiAgcHVibGljIG1vbnRoQ2VsbFRhYkluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZXZlbnRzIGluc2lkZSB0aGUgbW9udGggY2VsbCBzaG91bGQgYmUgYXJpYS1oaWRkZW5cbiAgICovXG4gIHB1YmxpYyBoaWRlTW9udGhDZWxsRXZlbnRzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHRydWUgaWYgZXZlbnQgdGl0bGVzIHNob3VsZCBiZSBhcmlhLWhpZGRlbiAoZ2xvYmFsKVxuICAgKi9cbiAgcHVibGljIGhpZGVFdmVudFRpdGxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHRydWUgaWYgaG91ciBzZWdtZW50cyBpbiB0aGUgd2VlayB2aWV3IHNob3VsZCBiZSBhcmlhLWhpZGRlblxuICAgKi9cbiAgcHVibGljIGhpZGVXZWVrSG91clNlZ21lbnQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgdHJ1ZSBpZiBob3VyIHNlZ21lbnRzIGluIHRoZSBkYXkgdmlldyBzaG91bGQgYmUgYXJpYS1oaWRkZW5cbiAgICovXG4gIHB1YmxpYyBoaWRlRGF5SG91clNlZ21lbnQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiJdfQ==